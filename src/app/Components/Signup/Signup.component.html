<div class="accordion">
  <div class="py-4 mb-5 d-flex">
    <img src="/assets/JioLogo.svg" alt="JioLogo" width="50px" height="50px" class="pl-5" />
    <h2 class="mt-2 pl-4">Boond</h2>
  </div>

  <div class="expansion">
    <mat-accordion>
      <mat-expansion-panel expanded="open">
        <mat-expansion-panel-header>
          <mat-panel-title class="d-flex justify-content-around align-items-center">
            <strong class="flex-grow-1 text-center">Organization Info</strong>
            <mat-icon color="accent">refresh</mat-icon>
            <button color="accent" mat-button>Reset</button>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <form class="orgForm" [formGroup]="organizationForm">
          <div class="d-flex flex-row justify-content-around display">
            <mat-form-field appearance="outline">
              <mat-label>{{ "Type of Organization" }}</mat-label>
              <mat-select formControlName="organizationType" placeholder="Type of Organization">
                <mat-option [value]="type" *ngFor="let type of orgTypes" (onSelectionChange)="onSignupForm()">{{ type }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="
                  organizationForm.controls['organizationType'].invalid &&
                  organizationForm.controls['organizationType'].errors.required
                ">
                {{ "organizationType is required" }}
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <mat-label>Organization Name</mat-label>
              <input matInput placeholder="Organization Name" (input)="onSignupForm()" formControlName="organizationName" />
              <mat-error *ngIf="
                  organizationForm.controls['organizationName'].invalid &&
                  organizationForm.controls['organizationName'].errors.required
                ">
                {{ "Organization Name is required" }}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="d-flex flex-row justify-content-around">
            <mat-form-field>
              <mat-label>Email Address</mat-label>
              <input matInput placeholder="Email Address" (input)="onSignupForm()" formControlName="email" />
              <mat-error *ngIf="
                  organizationForm.controls['email'].invalid &&
                  organizationForm.controls['email'].errors.required
                ">
                {{ "Email Address is required" }}
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <mat-label>Contact No.</mat-label>
              <input (input)="onSignupForm()" matInput placeholder="Contact No." formControlName="orgContact" />
              <mat-error *ngIf="
                  organizationForm.controls['orgContact'].invalid &&
                  organizationForm.controls['orgContact'].errors.required
                ">
                {{ "Contact No is required" }}
              </mat-error>
              <mat-error *ngIf="
                  organizationForm.controls['orgContact'].invalid &&
                  organizationForm.controls['orgContact'].errors.pattern
                ">
                {{ "Please, Enter 10 digit Mobile Number" }}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="d-flex flex-row justify-content-around">
            <mat-form-field>
              <mat-label>Address</mat-label>
              <input (input)="onSignupForm()" matInput placeholder="Address" formControlName="orgAddress" />
              <mat-error *ngIf="
                  organizationForm.controls['orgAddress'].invalid &&
                  organizationForm.controls['orgAddress'].errors.required
                ">
                {{ "Address is required" }}
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <mat-label>Registration No</mat-label>
              <input (input)="onSignupForm()" matInput placeholder="Registration No" formControlName="orgRegNum" />
              <mat-error *ngIf="
                  organizationForm.controls['orgRegNum'].invalid &&
                  organizationForm.controls['orgRegNum'].errors.required
                ">
                {{ "Registration No is required" }}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="d-flex flex-row justify-content-around">
            <mat-form-field>
              <mat-label>Registration Council</mat-label>
              <input (input)="onSignupForm()" matInput placeholder="Registration Council" formControlName="orgRegCouncil" />
              <mat-error *ngIf="
                  organizationForm.controls['orgRegCouncil'].invalid &&
                  organizationForm.controls['orgRegCouncil'].errors.required
                ">
                {{ "Registration Council is required" }}
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>{{ "Registration Year" }}</mat-label>
              <mat-select formControlName="orgRegYear" placeholder="{{ 'Registration Year' }}  *">
                <mat-option value="hospital" (onSelectionChange)="onSignupForm()">
                  {{ "hospital" }}</mat-option>
              </mat-select>
              <mat-error *ngIf="
                  organizationForm.controls['orgRegYear'].invalid &&
                  organizationForm.controls['orgRegYear'].errors.required
                ">
                {{ "Registration Year is required" }}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="d-flex flex-row justify-content-around">
            <mat-form-field class="width">
              <mat-label>City</mat-label>
              <input (input)="onSignupForm()" matInput placeholder="City" formControlName="orgCity" />
              <mat-error *ngIf="
                  organizationForm.controls['orgCity'].invalid &&
                  organizationForm.controls['orgCity'].errors.required
                ">
                {{ "City is required" }}
              </mat-error>
            </mat-form-field>
            <mat-form-field class="width">
              <mat-label>Pincode</mat-label>
              <input (input)="onSignupForm()" matInput placeholder="Pincode" formControlName="orgPincode" />
              <mat-error *ngIf="
                  organizationForm.controls['orgPincode'].invalid &&
                  organizationForm.controls['orgPincode'].errors.required
                ">
                {{ "Pincode is required" }}
              </mat-error>
            </mat-form-field>
            <mat-form-field class="width">
              <mat-label>Location</mat-label>
              <input (input)="onSignupForm()" matInput placeholder="Location" formControlName="orgLocation" />
              <mat-error *ngIf="
                  organizationForm.controls['orgLocation'].invalid &&
                  organizationForm.controls['orgLocation'].errors.required
                ">
                {{ "Location is required" }}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="d-flex justify-content-between mt-2 px-5">
            <h3>Certification of Incorportation</h3>
            <p class="mat-body-1">*File size should be less than 1 MB</p>
          </div>
          <div class="upload">
            <div class="d-flex justify-content-between">
              <p class="pt-2">
                Please upload your medical registration and document of state
                medical council proof.
              </p>
              <input #fileInput [hidden]="true" id="input-file-id" multiple type="file" formControlName="orgFileUpload" accept=".pdf" (change)="onOrgFileUpload($event)"
                (click)="fileInput.value = null" />
              <button color="accent" (click)="fileInput.click()" mat-button class="upload-button d-flex justify-content-between" type="button">
                <mat-icon color="accent">upload</mat-icon>
                <span>Upload</span>
              </button>
            </div>

            <ng-container *ngFor="let file of organizationFiles; let i = index">
              <div class="files d-flex my-2 align-items-center" *ngIf="organizationFiles.length > 0">
                <mat-icon class="icon pl-2 pr-4"> insert_drive_file</mat-icon>
                <div class="d-flex flex-column flex-grow-1">
                  <span clas="d-block">{{ file.name }}</span>
                  <span>{{ file.size }}</span>
                </div>
                <mat-icon class="icon" color="accent" (click)="onDeleteFile(i)">close</mat-icon>
              </div>
            </ng-container>
          </div>
        </form>
      </mat-expansion-panel>
    </mat-accordion>
  </div>

  <div class="expansion" [formGroup]="newEntityForm" *ngIf="NewEntityControl().controls.length > 0">
    <div formArrayName="newEntities" *ngFor="let control of NewEntityControl().controls; let i = index" class="my-3">
      <mat-accordion>
        <mat-expansion-panel expanded="open">
          <mat-expansion-panel-header>
            <mat-panel-title class="d-flex align-items-center justify-content-between">
              <button color="accent" (click)="deleteEntity(i)" mat-button class="upload-button d-flex justify-content-between" type="button">
                <mat-icon color="accent">delete</mat-icon>
                <span>Delete</span>
              </button>
              <strong class="flex-grow-1 text-center">New Entity Info</strong>
              <mat-icon color="accent">refresh</mat-icon>
              <button color="accent" mat-button>Reset</button>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form class="orgForm" [formGroupName]="i">
            <div class="d-flex flex-row justify-content-around">
              <mat-form-field appearance="outline">
                <mat-label>{{ "Type of Organization" }}</mat-label>
                <mat-select formControlName="entOrganizationType" placeholder="{{ 'Type of Organization' }}  *">
                  <mat-option [value]="type" *ngFor="let type of orgTypes"></mat-option>
                </mat-select>
                <!-- <mat-error *ngIf="
                    newEntityForm.controls['entOrganizationType'].invalid &&
                    newEntityForm.controls['entOrganizationType'].errors
                      .required
                  ">
                  {{ "organizationType is required" }}
                </mat-error> -->
              </mat-form-field>
              <mat-form-field>
                <mat-label>Organization Name</mat-label>
                <input matInput placeholder="Organization Name" formControlName="entOrganizationName" />
                <!-- <mat-error *ngIf="
                    newEntityForm.controls['entOrganizationName'].invalid &&
                    newEntityForm.controls['entOrganizationName'].errors
                      .required
                  ">
                  {{ "Organization Name is required" }}
                </mat-error> -->
              </mat-form-field>
            </div>
            <div class="d-flex flex-row justify-content-around">
              <mat-form-field>
                <mat-label>Email Address</mat-label>
                <input matInput placeholder="Email Address" formControlName="entEmailAddress" />
                <!-- <mat-error *ngIf="
                    newEntityForm.controls['entEmailAddress'].invalid &&
                    newEntityForm.controls['entEmailAddress'].errors.required
                  ">
                  {{ "Email Address is required" }}
                </mat-error> -->
              </mat-form-field>
              <mat-form-field>
                <mat-label>Contact No.</mat-label>
                <input matInput placeholder="Contact No." formControlName="entContact" />
                <!-- <mat-error *ngIf="
                    newEntityForm.controls['entContact'].invalid &&
                    newEntityForm.controls['entContact'].errors.required
                  ">
                  {{ "Contact No is required" }}
                </mat-error> -->
              </mat-form-field>
            </div>
            <div class="d-flex flex-row justify-content-around">
              <mat-form-field>
                <mat-label>Address</mat-label>
                <input matInput placeholder="Address" formControlName="entAddress" />
                <!-- <mat-error *ngIf="
                    newEntityForm.controls['entAddress'].invalid &&
                    newEntityForm.controls['entAddress'].errors.required
                  ">
                  {{ "Address is required" }}
                </mat-error> -->
                <mat-hint>
                  <mat-checkbox class="mat-checkbox-layout">Same as Parent Organization</mat-checkbox>
                </mat-hint>
              </mat-form-field>
              <mat-form-field>
                <mat-label>Registration No</mat-label>
                <input matInput placeholder="Registration No" formControlName="entRegNum" />
                <!-- <mat-error *ngIf="
                    newEntityForm.controls['entRegNum'].invalid &&
                    newEntityForm.controls['entRegNum'].errors.required
                  ">
                  {{ "Registration No is required" }}
                </mat-error> -->
              </mat-form-field>
            </div>
            <div class="d-flex flex-row justify-content-around">
              <mat-form-field>
                <mat-label>Registration Council</mat-label>
                <input matInput placeholder="Registration Council" formControlName="entRegCouncil" />
                <!-- <mat-error *ngIf="
                    newEntityForm.controls['entRegCouncil'].invalid &&
                    newEntityForm.controls['entRegCouncil'].errors.required
                  ">
                  {{ "Registration Council is required" }}
                </mat-error> -->
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ "Registration Year" }}</mat-label>
                <mat-select formControlName="entRegYear" placeholder="{{ 'Registration Year' }}  *">
                  <mat-option value="hospital"> {{ "hospital" }}</mat-option>
                </mat-select>
                <!-- <mat-error *ngIf="
                    newEntityForm.controls['entRegYear'].invalid &&
                    newEntityForm.controls['entRegYear'].errors.required
                  ">
                  {{ "Registration Year is required" }}
                </mat-error> -->
              </mat-form-field>
            </div>
            <div class="d-flex flex-row justify-content-around">
              <mat-form-field class="width">
                <mat-label>City</mat-label>
                <input matInput placeholder="City" formControlName="entCity" />
                <!-- <mat-error *ngIf="
                    newEntityForm.controls['entCity'].invalid &&
                    newEntityForm.controls['entCity'].errors.required
                  ">
                  {{ "City is required" }}
                </mat-error> -->
              </mat-form-field>
              <mat-form-field class="width">
                <mat-label>Pincode</mat-label>
                <input matInput placeholder="Pincode" formControlName="entPincode" />
                <!-- <mat-error *ngIf="
                    newEntityForm.controls['entPincode'].invalid &&
                    newEntityForm.controls['entPincode'].errors.required
                  ">
                  {{ "Pincode is required" }}
                </mat-error> -->
              </mat-form-field>
              <mat-form-field class="width">
                <mat-label>Location</mat-label>
                <input matInput placeholder="Location" formControlName="entLocation" />
                <!-- <mat-error *ngIf="
                    newEntityForm.controls['entLocation'].invalid &&
                    newEntityForm.controls['entLocation'].errors.required
                  ">
                  {{ "Location is required" }}
                </mat-error> -->
              </mat-form-field>
            </div>
            <div class="d-flex justify-content-between mt-2 px-5">
              <h3>Certification of Incorportation</h3>
              <p class="mat-body-1">*File size should be less than 1 MB</p>
            </div>
            <div class="upload">
              <div class="d-flex justify-content-between">
                <p class="pt-2">
                  Please upload your medical registration and document of state
                  medical council proof.
                </p>
                <input #fileInput [hidden]="true" id="input-file-id" multiple type="file" formControlName="entFileUpload" accept=".csv,.xls,.xlsx" (change)="onEntFileUpload($event)"
                  (click)="fileInput.value = null" />
                <button color="accent" (click)="fileInput.click()" mat-button class="upload-button d-flex justify-content-between" type="button">
                  <mat-icon color="accent">upload</mat-icon>
                  <span>Upload</span>
                </button>
              </div>

              <ng-container *ngFor="let file of entityFiles; let i = index">
                <div class="files d-flex my-2 align-items-center" *ngIf="showFile">
                  <mat-icon class="icon pl-2 pr-4"> insert_drive_file</mat-icon>
                  <div class="d-flex flex-column flex-grow-1">
                    <span clas="d-block">{{ file.name }}</span>
                    <span>{{ file.size }}</span>
                  </div>
                  <button mat-icon-button class="icon" color="accent" (click)="onDeleteEntityFile(i)">
                    ok
                    <!-- <mat-icon color="accent">close</mat-icon> -->
                  </button>
                </div>
              </ng-container>
            </div>
          </form>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </div>
</div>
<div class="d-flex justify-content-around align-items-center footer py-2">
  <button color="accent" mat-button class="mt-1 addEntity" [disabled]="!organizationForm.valid" (click)="addNewEntity()">
    <strong>Add New Entity</strong>
  </button>
  <button mat-raised-button class="btn-danger signup" [disabled]="!organizationForm.valid" (click)="onSubmit()" type="submit">
    Submit
  </button>
</div>